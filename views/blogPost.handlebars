<h1>All Posts</h1>
{{#each posts}}
    <div>
        <h2>{{this.title}}</h2>
        <p>{{this.content}}</p>
        <!-- Display image if imageUrl is present -->
        {{#if this.imageUrl}}
            <img src="{{this.imageUrl}}" alt="Post Image">
        {{/if}}
        <!-- Display link if url is present -->
        {{#if this.url}}
            <a href="{{this.url}}">Link to More Info</a>
        {{/if}}

        <!-- Display post creation and update times -->
        <p>Posted on: {{formatDate this.createdAt}}</p>
        {{#if this.updatedAt}}
            <p>Last updated: {{formatDate this.updatedAt}}</p>
        {{/if}}

        <!-- Links to view, edit, delete the post -->
        <a href="/posts/{{this.id}}">View Post</a> | 
        <a href="/posts/edit/{{this.id}}">Edit Post</a> | 
        <form action="/posts/{{this.id}}?_method=DELETE" method="POST" style="display: inline;">
            <button type="submit">Delete Post</button>
        </form>

        <!-- Display comments for this post -->
        <h3>Comments:</h3>
        {{#if this.comments}}
            {{#each this.comments}}
                <div>
                    <p>{{this.content}}</p>
                    <!-- Add a delete button for each comment if the user owns the comment -->
                    {{!-- Implement userOwnsComment logic here if needed --}}
                </div>
            {{/each}}
        {{else}}
            <p>No comments yet.</p>
        {{/if}}

        <!-- Form to add a new comment -->
        <form action="/comments" method="POST">
            <input type="hidden" name="postId" value="{{this.id}}">
            <textarea name="content" placeholder="Add a comment..." required></textarea>
            <button type="submit">Post Comment</button>
        </form>
    </div>
{{/each}}
